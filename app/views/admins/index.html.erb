<h1 class="my-5">Dashboard</h1>

  <h2 class="mt-5 mb-2" id="users_admin">Gestion des Utilisateurs</h2>
  <%= render "event_submissions/index" %>
  <h2 class="mt-5 mb-2" id="events_admin">Validation des Évènements</h2>
   <%# stats %>
    <ul class="list-group">
      <li class="list-group-item d-flex justify-content-between align-items-center">
        Évènements <%= @events_to_review.first.status %>
        <span class="badge bg-dark rounded-pill"><%= @events_to_review.length %></span>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        Évènements <%= @validated_events.first.status %>s
        <span class="badge bg-dark rounded-pill"><%= @validated_events.length %></span>
      </li>
      <li class="list-group-item  d-flex justify-content-between align-items-center">
        Évènements <%= @rejected_events.first.status %>s
        <span class="badge bg-dark rounded-pill"><%= @rejected_events.length %></span>
      </li>
      <li class="list-group-item  d-flex justify-content-between align-items-center">
        Total
        <span class="badge bg-dark rounded-pill"><%= Event.all.length %></span>
      </li>
    </ul>

  <%# TAB MENU %>
  <ul class="nav nav-tabs mt-5" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link active" data-bs-toggle="tab" 
        href="#to_review" aria-selected="true" role="tab" >
        <%= @events_to_review.first.status.capitalize %></a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link " data-bs-toggle="tab" 
        href="#validated" aria-selected="false" role="tab" tabindex="-1">
        <%= @validated_events.first.status.capitalize %>s</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" data-bs-toggle="tab" 
        href="#rejected" aria-selected="false" role="tab" tabindex="-1" >
        <%= @rejected_events.first.status.capitalize %>s</a>
    </li>
    
  </ul>
<%# TAB CONTENT %>
<div id="myTabContent" class="tab-content">
  <%# TAB A REVISER %>
  <div class="tab-pane fade show active" id="to_review" role="tabpanel">
    <%# Tab event à réviser %>
    <div class="list-group">
      <% if @events_to_review %>
        <% @events_to_review.each do |event| %>
          <div class="list-group-item list-group-item-action d-flex justify-content-between">
            <div>
              <h5 class="mb-1 text-dark"><%= event.title %></h5>
              <p class="mb-1">Date : <%= event.date %> de <%= event.start_time %> à <%= event.end_time %> (<%= event.duration_format%>)
              <br>Prix: <%= event.price %>&nbsp;€</p>
              <p><%= event.description %></p>
              <p class="mb-1">Utilisateur : <%= event.admin_user.email %></p>
            </div>
            <div>
              <%= link_to 'Voir', event_path(event.id), class: "btn btn-sm btn-dark my-1 w-100"%>
              <%= button_to 'Valider', event_path(event.id), class: "btn btn-sm btn-success my-1 w-100"%>
              <%= button_to 'Rejeter', event_path(event.id), class: "btn btn-sm btn-danger my-1 w-100"%>
            </div>
          </div>
          
        <% end %>
      <% end %>
    </div>
  </div>

    <%# TAB VALIDES %>
  <div class="tab-pane fade" id="validated" role="tabpanel">
    </ul>
    <%# Tab event acceptés %>
    <div class="list-group">
      <% if @validated_events %>
        <% @validated_events.each do |event| %>
          <a href = "<%= event_path(event.id) %>" class="list-group-item list-group-item-action flex-column align-items-start">
            <div>
              <h5 class="mb-1 text-dark"><%= event.title %></h5>
              <p class="mb-1">Date : <%= event.date %> <%= event.start_time %> à <%= event.end_time %> 
              - Prix: <%= event.price %>&nbsp;€</p>
              <p class="mb-1">Utilisateur : <%= event.admin_user.email %></p>
            </div>
          </a>
        <% end %>
      <% end %>
    </div>
  </div>

  <%# TAB REJETES %>
  <div class="tab-pane fade" id="rejected" role="tabpanel">
    <%# Tab event rejetés %>
    <div class="list-group">
      <% if @rejected_events %>
        <% @rejected_events.each do |event| %>
          <a href = "<%= event_path(event.id) %>" class="list-group-item list-group-item-action flex-column align-items-start">
            <div>
              <h5 class="mb-1 text-dark"><%= event.title %></h5>
              <p class="mb-1">Date : <%= event.date %> <%= event.start_time %> à <%= event.end_time %> 
              - Prix: <%= event.price %>&nbsp;€</p>
              <p class="mb-1">Utilisateur : <%= event.admin_user.email %></p>
            </div>
          </a>
        <% end %>
      <% end %>
    </div>
  </div>

</div>